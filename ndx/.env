# Exchange Services - Environment Configuration Template
# Copy this file to .env.local or .env.production and customize values
# Usage: docker compose --env-file .env.local up --build

# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
# Environment: development, staging, or production
ENVIRONMENT=development

# Logging configuration
LOG_LEVEL=info          # Options: debug, info, warn, error
LOG_FORMAT=text         # Options: text, json

# =============================================================================
# BUILD CONFIGURATION
# =============================================================================
BUILD_VERSION=dev
BUILD_TIME=2025-09-15T14:30:00Z
GIT_COMMIT=local

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_USER=exchange
DB_PASSWORD=1234
DB_PORT=5432
DB_NAME=testdb2

# =============================================================================
# SERVICE PORTS
# =============================================================================
# Policy Decision Point service port
PORT_PDP=8082

# Consent Engine service port
PORT_CE=8081

# Orchestration Engine service port
PORT_OE=4000

# =============================================================================
# GENERAL SERVICE CONFIGURATION
# =============================================================================
# Host address for services (0.0.0.0 for all interfaces)
HOST=0.0.0.0

# JWT secret for authentication (REQUIRED in production - use strong secret)
JWT_SECRET=local-secret-key

# Enable CORS (true for development, false for production recommended)
CORS=true

# Rate limiting per minute
RATE_LIMIT=1000

# =============================================================================
# POLICY DECISION POINT (PDP) - DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL database connection for PDP
PDP_DB_HOST=postgres
PDP_DB_PORT=5432
PDP_DB_USERNAME=exchange
PDP_DB_PASSWORD=1234
PDP_DB_NAME=testdb2

# SSL mode for database connections: disable, allow, prefer, require, verify-ca, verify-full
DB_SSLMODE=disable

# Run database migrations on startup (true/false)
RUN_MIGRATION=false

# =============================================================================
# CONSENT ENGINE (CE) - DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL database connection for Consent Engine
CE_DB_HOST=postgres
CE_DB_PORT=5432
CE_DB_USERNAME=exchange
CE_DB_PASSWORD=1234
CE_DB_NAME=testdb2

# Consent Portal URL (for redirects and notifications)
CONSENT_PORTAL_URL=http://localhost:5173
CONSENT_PORTAL_CLIENT_ID=Mpjt5VUqDPL8iVByyFcMDregz6Ea

# Database connection pool settings
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=1h
DB_CONN_MAX_IDLE_TIME=30m

# Database timeout settings
DB_QUERY_TIMEOUT=30s
DB_CONNECT_TIMEOUT=10s
DB_RETRY_ATTEMPTS=3
DB_RETRY_DELAY=1s

# =============================================================================
# ORCHESTRATION ENGINE (OE) - CONFIGURATION
# =============================================================================
# Path to the configuration file (relative to container working directory)
OE_CONFIG_PATH=./fl-config.json
OE_SCHEMA_PATH=./schema.graphql

# Note: The OE service also requires a config.json file mounted as a volume
# This file should contain provider configurations, CE/PDP URLs, and arg mappings
# Example location: ./orchestration-engine-go/config.json

# =============================================================================
# IDP CONFIGURATION
# =============================================================================
IDP_ORG_NAME=Super
IDP_BASE_URL=https://wso2is:9444
IDP_ISSUER=https://wso2is:9444/oauth2/token
IDP_AUDIENCE=Mpjt5VUqDPL8iVByyFcMDregz6Ea
IDP_JWKS_URL=http://wso2is:9764/oauth2/jwks